<!DOCTYPE html>
<html lang="en">
{% load my_tag %}
<head>
    <meta charset="UTF-8">
    <title>Title</title>

    <link rel="stylesheet" type="text/css" href="/static/css/index.css">
    <link rel="stylesheet" href="/static/css/reset.css">
    <script src="/static/vue/vue.js"></script>
</head>

<body>
    <div id="app">
        <link rel="stylesheet" :href="'/static/css/theme/' + theme + '.css'">
        <link rel="stylesheet" :href="'/static/css/mouse/' + mouse + '.css'">
        <nav>
            <!-- 导航条左 -->
            <div class="left">
                <a class="link" href="#">首页</a>
                <a class="link" href="#">新闻</a>
                <a class="link" href="#">心情</a>
                <a class="link" href="#">关于</a>
            </div>

            <!-- 导航条右 -->
            <div class="right">
                <img class="theme_img" v-show="theme === 'light'" src="/static/image/theme/light.svg" @click="setTheme('dark')" alt="">
                <img class="theme_img" v-show="theme === 'dark'" src="/static/image/theme/dark.svg" @click="setTheme('light')" alt="">
                <a class="link" href="#">登录</a>
                <a class="link" href="#">注册</a>
            </div>
        </nav>

        <header>
            {% for img in img_list %}
            <div class="dynamic_shuffl">
                <img src="{{ img }}" alt="">
             </div>
            {% endfor %}
        </header>

        <main>
            网页主体
            <div>
                {{ 2|add1 }}
            </div>
        </main>
        <footer>
            底部信息栏
        </footer>
    </div>

    <script>
        new Vue ({
            el: '#app',
            delimiters: ["[[", "]]"],
            data: {
                msg: 'snak',
                theme: 'light', // 默认网页主题
                mouse: 'white', // 默认鼠标主题
            },
            created() {
                this.init_theme()
            },
            methods: {
                init_theme() {
                    // 读取存储的主题信息
                    let theme = localStorage.getItem('theme')
                    if (theme) this.theme = theme
                    
                    // 随机创建鼠标主题
                    let mouse = ["blue", "purple", "white", "green", "red", "yellow"]
                    let index = Math.floor(Math.random() * 6);
                    this.mouse = mouse[index]
                },

                // 设置主题
                setTheme(themeName) {
                    this.theme = themeName
                    // 存储主题
                    localStorage.setItem('theme', themeName)
                }
            }
        })  

        // 图片轮播图
        let menu_img = document.querySelectorAll('.dynamic_shuffl')
        console.log(menu_img)

        let menu_length = menu_img.length
        let index = 0
        setInterval(() => {
            index ++
            if (index === menu_length) index = 0
            
            for (let i of menu_img)
                i.style.opacity = 0
            menu_img[index].style.opacity = 1
        }, 6000)
    </script>
</body>
</html>
